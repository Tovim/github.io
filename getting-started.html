<!DOCTYPE html>

<html lang="cs">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<title> - Beginning Elm</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0"> 
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="css/main.css">
<!--<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">    deformuje zobrazení font awsome -->
</head>

<body>

<section class="heading">
<h1> 2.1 </h1>
<h2>Začínáme</h2>
</section>

<div class="page-content">
<div class="container">

<div class="breadcrumb-holder">
<header id="breadcrumb" class="breadcrumb">
<a href="aa-index.html" class="breadcrumb-toggle">
  <span></span>
  <span></span>
  <span></span>
</a>

<span class="breadcrumb-section">syntaxe</span>

<a class="breadcrumb-next" href="elm-basics-intro.html">
<i class="fa fa-angle-right"></i><span>Next article</span>
</a>
<a class="breadcrumb-previous" href="introduction.html">
<i class="fa fa-angle-left"></i><span>Previous article</span>
</a>
</header>
</div>

<article class="content">
	
<a href="#2.1">Instalace</a></br>
<a href="#2.2">Vytvoření webové stránky</a></br>
<a href="#2.3">Platforma Elm</a></br>
<a href="#2.4">Programovací jazyk Elm</a></br>
<a href="#2.5">Kompilátor Elmu</a></br>
<a href="#2.6">Architektura Elmu</a></br>
<a href="#2.7">Runtime Elmu</a></br>
<a href="#2.8">Elm-make</a></br>
<a href="#2.9">Elm package</a></br>
<a href="#2.10">Elm-reactor</a></br>
<a href="#2.11">Elm-repl</a></br>
<a href="#2.12">Sajt Try Elm</a></br>
</article>

<article class="content">
<h4 ><a id="2.1">Instalace</a></h4>
<p>Než začneme, potřebujeme si instalovat a konfigurovat několik nástrojů, nezbytných pro práci s jazykem Elm.</p>

<h4>Instalace Node.js</h4>

<p>
Node.js je běhové (runtime) prostření JavaScriptu pro vytváření většinou serverových webových aplikací.</p>


<dt>Proč Node.js?</dt>
<p>Tato celá kniha popisuje jazyk pro vytváření klientských webových aplikací. Proč potřebujeme instalovat Node.js? Potřebujeme jej ze dvou důvodů:</p>

<ul>
<li><a href="elm-repl.html" target="_blank">elm-repl</a> - nástroj, který budeme používat k experimentování s jazykem Elm - kompiluje kód Elmu do JavaScriptu. Node.js poskytuje prostředí pro běh tohoto JS kódu.</li>
<li>Součástí Node.js je správce paketů, zvaný NPM (<strong>N</strong>ode.js <strong>P</strong>ackage <strong>M</strong>anager). Většína nástrojů a knihoven pro vytváření "front-end" aplikací je distribuována jako pakety NPM. V této knize nebudeme NPM používat příliš často ale jako produktivní programátor jej potřebujete mít ve svém arzenálu.</li>
</ul>


<p>Při instalaci Node.js ve svém počítači se řiďte  <a href="https://nodejs.org/en/download/" target="_blank">instrukcemi</a>
oficiálního sajtu. Protože je NPM součástí Node.js, nepotřebujete jej zvlášť instalovat. Pro ověření, že máte Node.js 4.0 či vyšší nainstalovaný, zadejte odkudkoli tento příkaz v terminálu:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">node --version</code></pre></figure>

<h4>Instalace Elm Platform</h4>

<p>Elm Platform zahrnuje všechny nástroje, potřebné pro práci s Elm. Při instalaci Elm Platform následujte <a href="https://guide.elm-lang.org/install.html" target="_blank">instrukce</a>,
uvedené na oficiálním sajtu. Potom si ověřte správnost instalace příkazem v terminálu:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">elm --version</code></pre></figure>

<p>Mělo by se ukázat číslo instalované verze, což je aktuálně <code class="highlighter-rouge">0.18.0</code>.</p>

<h4>Editor zdrojového kódu</h4>

<p>Při studiu této knihy budete psát mnoho zdrojového kódu. Některý z těchto kódů bude realizován uvnitř terminálu v aplikaci <a href="#2.11" target="_blank">elm-repl</a>. Některé kódy budou uloženy do souboru a kompilovány. Elm nemá vlastní editor zdrojového kódu. Je tedy na vás, který editor si zvolíte. Většina editorů nepodporuje užitečné vlastnosti jako je zvýraznění syntaxe a automatické dokončování zápisů.<br>
Pokud se spokojíte zvýrazňováním párových závorek, je Notepad++ vaše správná volba. Jinak si můžete pro osm vybraných editorů nainstalovat pluginy podle odkazů v oficiální dokumentaci Elmu <a href="https://guide.elm-lang.org/install.html" target="_blank">Configure Your Editor</a>.</p>

<p>Protože znaky tabulátoru generují v Elmu syntaktické chyby, nezapomeňte nastavit editor tak, aby při stisku tabulátoru vkládal mezery.</p>

<h4>Aplikace elm-format</h4>

<p>Kompilátor akceptuje jakýkoli platný program ale rozsáhlá komunita Elmu preferuje programy, psané určitým stylem. U většiny jakyků si můsíme stylové požadavky pamatovat a přičinlivě je následovat. Nejen že to zabírá určité místo v naší paměti ale také nás to rozptyluje při řešení problémů.<br>
Aplikace <a href="https://github.com/avh4/elm-format" target="_blank">elm-format</a> se snaží tento problém řešit automatickým formátovaním našeho kódu podle souboru pravidel, standardizovaných komunitou. I když nemusíte, vřele vám instalaci <code class="highlighter-rouge">elm-format</code> doporučuji.</p>

<dl>
<dt>elm-format Release Status</dt>
<dd>As of this writing, <code style="font-size: 14px;">elm-format</code> is still in <a href="https://en.wikipedia.org/wiki/Software_release_life_cycle#Alpha" target="_blank">alpha</a>. Don’t be surprised if the current format of your program looks different from the one 1.0.0 version of <code class="highlighter-rouge">elm-format</code> produces in the future. Despite its alpha status, most community members are already using it. So you should be fine using it too. All code in the book that is meant to be saved in a file has been formatted using <code class="highlighter-rouge">elm-format</code>.</dd>
</dl>

<p>Na rozdíl od Elm Platformy, není <code class="highlighter-rouge">elm-format</code> expedován s instalátorem. Tým jeho vývojářů naznačil, že jednoduchá možnost instalace bude k disposici u stabilní verze. Do té doby musíme zprovoznění aplikace věnovat trochu více pozornosti.</p>

<p><strong>Krok 1:</strong> V sekci <a href="https://github.com/avh4/elm-format#installation-" target="_blank">installation</a> si stáhněte vhodnou verzi pro váš operační systém a rozbalte ji. Potřebujete aby byla kompatibilní s Elm 0.18.</p>

<p><strong>Krok 2:</strong> Abyste mohli <code class="highlighter-rouge">elm-format</code> spouštět v teminálu z kteréhokoli diskového oddílu, přidejte jeho lokaci do proměnné <code class="highlighter-rouge">PATH</code>.</p>

<dl>
<dt>Proměnná PATH</dt>
<dd><a href="http://superuser.com/a/284351" target="_blank">PATH</a> je proměnná prostředí, která uvádí cestu k adresáři, v němž je spustitelný program umístěn. Takovýto program lze v terminálu spouštět bez zadávání cesty k souboru.</dd>
</dl>

<p>Nejlepší způsob přidání  aplikace <code class="highlighter-rouge">elm-format</code> do proměnné <code class="highlighter-rouge">PATH</code> je nakopírovat ji do adresáře, který obsahuje program <code class="highlighter-rouge">elm</code>. Instalátor Elm Platformy vloží programový soubor <code class="highlighter-rouge">elm</code> do adresáře, který je již vložen do proměnné <code class="highlighter-rouge">PATH</code>. Takže kopírování <code class="highlighter-rouge">elm-format</code> do stejného adresáře umožní jeho spuštění odkudkoli v terminálu. V Unixu si můžete vytisknout úplnou cestu k programu <code class="highlighter-rouge">elm</code> spuštěním následujcího příkazu v terminálu:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">which elm
/usr/local/bin/elm</code></pre></figure>

<p>Ve Windows dosáhnete téhož spuštěním následujcího příkazu: <code class="highlighter-rouge">where elm</code>.</p>

<p><strong>Krok 3:</strong> Pohleďme na <code>elm-format</code> v akci. Vytvořte nový adresář s názvem <code>beginning-elm</code>. Kde tento adresář vytvoříte není důležité. V adresáři vytvořte rovněž soubor <code> a vložte do něho následující kód</code>:</p>

<figure class="highlight"><pre><code class="language-haskell" data-lang="haskell"><span class="kr">module</span> <span class="nn">Main</span> <span class="n">exposing</span> <span class="p">(</span><span class="o">..</span><span class="p">)</span>

<span class="kr">import</span> <span class="nn">Html</span> <span class="n">exposing</span> <span class="p">(</span><span class="n">beginnerProgram</span><span class="p">,</span> <span class="n">div</span><span class="p">,</span> <span class="n">button</span><span class="p">,</span> <span class="n">text</span><span class="p">)</span>
<span class="kr">import</span> <span class="nn">Html.Events</span> <span class="n">exposing</span> <span class="p">(</span><span class="n">onClick</span><span class="p">)</span>


<span class="n">main</span> <span class="o">=</span>
  <span class="n">beginnerProgram</span> <span class="p">{</span>
    <span class="n">model</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">view</span> <span class="o">=</span> <span class="n">view</span><span class="p">,</span> <span class="n">update</span> <span class="o">=</span> <span class="n">update</span>
  <span class="p">}</span>

<span class="n">view</span> <span class="n">model</span> <span class="o">=</span>
  <span class="n">div</span> <span class="kt">[]</span>
    <span class="p">[</span> <span class="n">button</span> <span class="p">[</span><span class="n">onClick</span> <span class="kt">Decrement</span><span class="p">]</span> <span class="p">[</span><span class="n">text</span> <span class="s">"-"</span><span class="p">]</span>
    <span class="p">,</span> <span class="n">div</span> <span class="kt">[]</span> <span class="p">[</span><span class="n">text</span> <span class="p">(</span><span class="n">toString</span> <span class="n">model</span><span class="p">)]</span>
    <span class="p">,</span> <span class="n">button</span> <span class="p">[</span><span class="n">onClick</span> <span class="kt">Increment</span><span class="p">]</span> <span class="p">[</span><span class="n">text</span> <span class="s">"+"</span><span class="p">]</span>
    <span class="p">]</span>

<span class="kr">type</span> <span class="kt">Msg</span> <span class="o">=</span> <span class="kt">Increment</span> <span class="o">|</span> <span class="kt">Decrement</span>
<span class="n">update</span> <span class="n">msg</span> <span class="n">model</span> <span class="o">=</span>
  <span class="kr">case</span> <span class="n">msg</span> <span class="kr">of</span>
    <span class="kt">Increment</span> <span class="o">-&gt;</span> <span class="n">model</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="kt">Decrement</span> <span class="o">-&gt;</span> <span class="n">model</span> <span class="o">-</span> <span class="mi">1</span></code></pre></figure>

<p class="info">Neznepokojujte se, pokud výše uvedenému kódu rozumíte málo nebo vůbec ne. Na konci knihy budete schopen porozumět mnohem složitějšímu kódu.</p>

<p>I když je uvedený kód platný pro Elm, není příliš konformní se zavedeným souborem doporučení pro úpravu kódu, zvaným <a href="http://elm-lang.org/docs/style-guide" target="_blank">style guide</a>. K nápravě použijme aplikaci <code class="highlighter-rouge">elm-format</code>. Přejděte do adresáře <code class="highlighter-rouge">beginning-elm</code> a v terminálu realizujte tento příkaz:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">elm-format TestElmFormat.elm</code></pre></figure>

<p>Uvidíte následující varování:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">This will overwrite the following files to use Elm<span class="s1">'s preferred style:

    TestElmFormat.elm

This cannot be undone! Make sure to back up these files before proceeding.

Are you sure you want to overwrite these files with formatted versions? (y/n)</span></code></pre></figure>

<p>Odpovězte <strong>y</strong>. Když se nyní podíváte do souboru <code class="highlighter-rouge">TestElmFormat.elm</code>, uvidíte že <code class="highlighter-rouge">elm-format</code> náš kód pěkně zformátovál:</p>

<figure class="highlight"><pre><code class="language-haskell" data-lang="haskell"><span class="kr">module</span> <span class="nn">Main</span> <span class="n">exposing</span> <span class="p">(</span><span class="o">..</span><span class="p">)</span>

<span class="kr">import</span> <span class="nn">Html</span> <span class="n">exposing</span> <span class="p">(</span><span class="n">beginnerProgram</span><span class="p">,</span> <span class="n">div</span><span class="p">,</span> <span class="n">button</span><span class="p">,</span> <span class="n">text</span><span class="p">)</span>
<span class="kr">import</span> <span class="nn">Html.Events</span> <span class="n">exposing</span> <span class="p">(</span><span class="n">onClick</span><span class="p">)</span>


<span class="n">main</span> <span class="o">=</span>
    <span class="n">beginnerProgram</span>
        <span class="p">{</span> <span class="n">model</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="p">,</span> <span class="n">view</span> <span class="o">=</span> <span class="n">view</span>
        <span class="p">,</span> <span class="n">update</span> <span class="o">=</span> <span class="n">update</span>
        <span class="p">}</span>


<span class="n">view</span> <span class="n">model</span> <span class="o">=</span>
    <span class="n">div</span> <span class="kt">[]</span>
        <span class="p">[</span> <span class="n">button</span> <span class="p">[</span> <span class="n">onClick</span> <span class="kt">Decrement</span> <span class="p">]</span> <span class="p">[</span> <span class="n">text</span> <span class="s">"-"</span> <span class="p">]</span>
        <span class="p">,</span> <span class="n">div</span> <span class="kt">[]</span> <span class="p">[</span> <span class="n">text</span> <span class="p">(</span><span class="n">toString</span> <span class="n">model</span><span class="p">)</span> <span class="p">]</span>
        <span class="p">,</span> <span class="n">button</span> <span class="p">[</span> <span class="n">onClick</span> <span class="kt">Increment</span> <span class="p">]</span> <span class="p">[</span> <span class="n">text</span> <span class="s">"+"</span> <span class="p">]</span>
        <span class="p">]</span>


<span class="kr">type</span> <span class="kt">Msg</span>
    <span class="o">=</span> <span class="kt">Increment</span>
    <span class="o">|</span> <span class="kt">Decrement</span>


<span class="n">update</span> <span class="n">msg</span> <span class="n">model</span> <span class="o">=</span>
    <span class="kr">case</span> <span class="n">msg</span> <span class="kr">of</span>
        <span class="kt">Increment</span> <span class="o">-&gt;</span>
            <span class="n">model</span> <span class="o">+</span> <span class="mi">1</span>

        <span class="kt">Decrement</span> <span class="o">-&gt;</span>
            <span class="n">model</span> <span class="o">-</span> <span class="mi">1</span></code></pre></figure>

<p>Chcete-li obejít varování, spusťte <code class="highlighter-rouge">elm-format</code> s návěstím <code class="highlighter-rouge">--yes</code>.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">elm-format TestElmFormat.elm --yes</code></pre></figure>

<p>Soubor <code class="highlighter-rouge">TestElmFormat.elm</code> již nebudeme potřebovat, takže jej můžete smazat.</p>

<p><strong>Krok 4:</strong> Spouštění aplikace <code class="highlighter-rouge">elm-format</code> při každé změně zdrojového souboru může být únavné. Z toho důvodů většina editorů kódu disponuje pluginem, aktivovaným při každém uložení souboru s příponou .elm. Instalujte si plugin pro svůj editor ze specializovaného <a href="https://github.com/avh4/elm-format#editor-integration" target="_blank">sajtu</a>. Některé pluginy vyžadují aktivaci volby  <em>format on save</em>. Nezapomeňte si přečíst příslušné instrukce.</p>
</article>

<article class="content">
<h4 ><a id="2.2">Vytvoření webové stránky</a></h4>

<p>Získejme určité ponětí o programování v Elm ještě předtím, než budeme do této problematiky řádně uvedeni. Vytvoříme jednoduchou webovou stránku, nejprve s použitím HTML a CSS. Později tutéž stránku přestavíme pomocí Elm abychom viděli rozdíl mezi oběma přístupy.</p>

<h4 >Vytvoření jednoduché stránky s HTML</h4>

<p>Vytvořte soubor <code class="highlighter-rouge">homepage.html</code> uvnitř adresáře <code class="highlighter-rouge">beginning-elm</code>, který jsme vytvořili v sekci <a href="installation.html#installing-elm-format" target="_blank">Instalace</a> a vložte do něho následující text:</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">href=</span><span class="s">"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"</span><span class="nt">&gt;</span>

    <span class="nt">&lt;style&gt;</span>
      <span class="nc">.jumbotron</span> <span class="p">{</span>
        <span class="nl">background-color</span><span class="p">:</span> <span class="m">#e6ffe6</span><span class="p">;</span>
        <span class="nl">text-align</span><span class="p">:</span> <span class="nb">center</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="nt">&lt;/style&gt;</span>
  <span class="nt">&lt;/head&gt;</span>

  <span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"jumbotron"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;h1&gt;</span>Welcome to Dunder Mifflin!<span class="nt">&lt;/h1&gt;</span>
      <span class="nt">&lt;p&gt;</span>
        Dunder Mifflin Inc. (stock symbol <span class="nt">&lt;strong&gt;</span>DMI<span class="nt">&lt;/strong&gt;</span>) is
        a micro-cap regional paper and office supply distributor with
        an emphasis on servicing small-business clients.
      <span class="nt">&lt;/p&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span></code></pre></figure>

<p>Je to jednoduchá webová stránka s pozdravem a krátkým popisem jedné z našich oblíbených společností. Stránka je stylově upravena CSS frameworkem <a href="http://getbootstrap.com/" target="_blank">Bootstrap</a>. Rovněž obsahuje řádkovou stylyzaci (inline style).</p>

<p class="info">Nebuďte znepokojeni, pokud neznáte "Bootstrap". Používáme jej zde k menšímu vylepšení vzhledu stránky. Později nám poslouží jako příklad načtení externího frameworku CSS pomocí Elm.</p>

<p>Otevřte soubor <code class="highlighter-rouge">homepage.html</code> v prohlížeči. Měl by vypadat nějak takto:</p>

<p><img src="images/homepage-in-html.png" alt="" /></p>

<p>Následně přestavíme domovskou stránku pro Dunder Mifflin pomocí Elm.</p>

<h4>Vytvoření jednoduché stránky prostřednictvím Elm</h4>

<p>Vytvořte soubor <code class="highlighter-rouge">HomePage.elm</code> v adresáři <code class="highlighter-rouge">beginning-elm</code> a vložte do něho následující kód:</p>

<figure class="highlight"><pre><code class="language-haskell" data-lang="haskell"><span class="kr">module</span> <span class="nn">BeginningElm</span> <span class="n">exposing</span> <span class="p">(</span><span class="o">..</span><span class="p">)</span>

<span class="kr">import</span> <span class="nn">Html</span> <span class="n">exposing</span> <span class="p">(</span><span class="o">..</span><span class="p">)</span>
<span class="kr">import</span> <span class="nn">Html.Attributes</span> <span class="n">exposing</span> <span class="p">(</span><span class="o">..</span><span class="p">)</span>


<span class="n">view</span> <span class="n">model</span> <span class="o">=</span>
    <span class="n">div</span> <span class="p">[</span> <span class="kr">class</span> <span class="s">"jumbotron"</span> <span class="p">]</span>
        <span class="p">[</span> <span class="n">h1</span> <span class="kt">[]</span> <span class="p">[</span> <span class="n">text</span> <span class="s">"Welcome to Dunder Mifflin!"</span> <span class="p">]</span>
        <span class="p">,</span> <span class="n">p</span> <span class="kt">[]</span>
            <span class="p">[</span> <span class="n">text</span> <span class="s">"Dunder Mifflin Inc. (stock symbol "</span>
            <span class="p">,</span> <span class="n">strong</span> <span class="kt">[]</span> <span class="p">[</span> <span class="n">text</span> <span class="s">"DMI"</span> <span class="p">]</span>
            <span class="p">,</span> <span class="n">text</span> <span class="s">") is a micro-cap regional paper and office supply distributor with an emphasis on servicing small-business clients."</span>
            <span class="p">]</span>
        <span class="p">]</span>


<span class="n">main</span> <span class="o">=</span>
    <span class="n">view</span> <span class="s">"dummy model"</span></code></pre></figure>

<p>Neznepokojujte se tím, že nerozumíte výše uvedenému kódu. Jak pracují aplikace Elm si vysvětlíme podrobně později. Vše, co tento kód dělá, je to, že vytváří tutéž domovskou stránku, kterou jsme vytvořili pomocí HTML a CSS výše. Spusťte následující příkaz z terminálu v adresáři <code class="highlighter-rouge">beginning-elm</code> za účelem kompilace souboru <code class="highlighter-rouge">HomePage.elm</code> na JavaScript.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">elm-make HomePage.elm --output elm.js</code></pre></figure>

<p class="info">Výstupní soubor se nemusí jmenovat <code class="highlighter-rouge">elm.js</code>. Můžete jej pojmenovat jinak ale nezapomeňte rovněž změnit jméno v souvisícím HTML souboru.</p>

<p>Elm vás bude žádat o svolení k instalaci několika paketů. Odpovězte "y". Jakmile Elm nainstaluje pakety a kompiluje zdrojový kód, vytvoří několik nových souborů a adresář uvnitř adresáře <code class="highlighter-rouge">beginning-elm</code>.</p>

<p><img src="images/elm-stuff-directory.png" alt="" /></p>

<p><strong>elm-package.json</strong> - Elm používá tento soubor k uložení metadat o projektu a o jeho dependencích (závislostech).</p>

<p><strong>elm-stuff</strong> - Uložiště artefaktů, vytvořených poté, co <code class="highlighter-rouge">elm-make</code> zkompiloval náš kód, včetně paketů, na nichž náš projekt závisí.</p>

<p><strong>elm.js</strong> - JavaScriptový soubor, který obsahuje kompilovaný kód.</p>

<p>Vytvořte další soubor, zvaný <code class="highlighter-rouge">index.html</code> uvnitř adresáře  <code class="highlighter-rouge">beginning-elm</code> a vložte do něho následující kód:</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">href=</span><span class="s">"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"</span><span class="nt">&gt;</span>

    <span class="nt">&lt;style&gt;</span>
      <span class="nc">.jumbotron</span> <span class="p">{</span>
        <span class="nl">background-color</span><span class="p">:</span> <span class="m">#e6ffe6</span><span class="p">;</span>
        <span class="nl">text-align</span><span class="p">:</span> <span class="nb">center</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="nt">&lt;/style&gt;</span>
  <span class="nt">&lt;/head&gt;</span>

  <span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"elm-code-is-loaded-here"</span><span class="nt">&gt;&lt;/div&gt;</span>

    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"elm.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
    <span class="nt">&lt;script&gt;</span>
      <span class="nx">Elm</span><span class="p">.</span><span class="nx">BeginningElm</span><span class="p">.</span><span class="nx">embed</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">"elm-code-is-loaded-here"</span><span class="p">));</span>
    <span class="nt">&lt;/script&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span></code></pre></figure>

<p>Kód uvnitř části <code class="highlighter-rouge">&lt;head&gt;</code> je přesně tentýž jako předtím. Část <code class="highlighter-rouge">&lt;body&gt;</code> ovšem vypadá odlišně. Vytvořili jsme element <code class="highlighter-rouge">div</code> a vložili do něho selektor <code class="highlighter-rouge">id</code>. Potom jsme uvedli odkaz na soubor <code class="highlighter-rouge">elm.js</code>, který byl generován jako výstup dříve spuštěného příkazu: <code class="highlighter-rouge">elm-make HomePage.elm --output elm.js</code>. Tento příkaz kompiloval náš kód v Elm a vkložil jej do souboru <code class="highlighter-rouge">elm.js</code>. Nakonec jsme použili funkci <code class="highlighter-rouge">Elm.BeginningElm.embed</code> k načtení naší aplikace do elementu <code class="highlighter-rouge">elm-code-is-loaded-here</code>.</p>

<p class="info">Netrapte se, pokud vám právě říkané nedává mnoho smyslu. Mechanizmus vytvoření a vložení Elmové aplikace si podrobně popíšeme později.</p>

<p>Otevřte soubor <code class="highlighter-rouge">index.html</code> v prohlížeči. Měl by vypadat stejně jako ten, vytvořený v HTML a CSS. Vytvoření jednoduché webové stránky Elmem vyžadovalo poněkud více úsilí než pouhým HTML a CSS. Pokud vše, co vytváříte, je několik statických stránek, potom patrně není Elm tím pravým nástrojem. Potřebujete-li však tvořit vysoce interaktivní webobé  aplikace, které se časem budou zvětšovat a budou složitější, potom je Elm pro tento účel fantastickým nástrojem.</p>

<p>Zbytek této knihy je věnován osvětlování programovacího jazyka Elm a poučení o tom, kterak nám jeho architektura pomáhá vytvářet neuvěřitelně robustní front-webové aplikace.</p>
</article>

<article class="content">
<h4 ><a id="2.3">Platforma Elm</a></h4>

<p>V předchozí sekci jsme instalovali Elm Platform, která spojuje dohromady všechny nástroje, potřebné pro práci s Elmem. V této sekci si stručně tyto nástroje probereme. Jak se budete prodírat jednotlivými odstavci této knihy, budete získávat více vhledu do jednotlivých témat.</p>

<p>Také  si všimněte, že v celé knize budeme používat termín <em>Elm</em> s odlišným významem. V závislosti na kontextu může tento termín znamenat kterýkoliv z následujících označení:</p>

<ul>
  <li>Programovací jazyk Elm</li>
  <li>Architektura Elmu</li>
  <li>Kompilátor Elmu</li>
  <li>Runtime Elmu</li>
</ul>

<p>Není chybou, označíme-li je kolektivně jako <em>Elm</em> ale je důležité abychom věděli, co ve skutečnosti znamenají. V následující sekci se pokusíme chápat, co každý z těchto temnínů znamená.</p>
</article>

<article class="content">
<h4 ><a id="2.4">Programovací jazyk Elm</a></h4>

<p>Programovací jazyk Elm se používá k psaní programů, které běží ve webovém prohlížeči. Popis jazyka je rozdělen do dvou částí: syntaxe a sémantika. Syntaxe popisuje gramatickou strukturu programu, zatímco sémantika se vztahuje na jeho význam. Například, následující kód je syntakticky neplatný, protože operátor <code class="highlighter-rouge">+++</code> v jazyce Elm neexistuje.</p>

<figure class="highlight"><pre><code class="language-haskell" data-lang="haskell"><span class="s">"syntactically invalid "</span> <span class="o">+++</span> <span class="s">"code"</span></code></pre></figure>

<p>Existuje nesčetně případů, kdy Elm může vrátit hlášení o syntaktické chybě: špatně použité klíčové slovo, dva operátory za sebou, nepárné závorky, etc.</p>

<p>Poté, co je ustavena syntaktická platnost programu, je čas na hledání sémantických chyb. Následující kód je například syntakticky platný ale sémanticky neplatný. Označení <code class="highlighter-rouge">++</code> je platným operátorem v Elmu ale může být použit pouze ke spojení dvou řetězců, nikoliv řetězce a čísla.</p>

<figure class="highlight"><pre><code class="language-haskell" data-lang="haskell"><span class="s">"syntactically valid, but semantically invalid "</span> <span class="o">++</span> <span class="mi">45</span></code></pre></figure>

<p>Platný program v Elmu musí být platný jak syntakticky, tak sémanticky.</p>

<p class="info">Programovací jazyk Elm je psán v programovacím jazyku <a href="https://www.haskell.org/" target="_blank">Haskell</a>. Náš sklon, vytvářet věci, které nám umožní vytvářet jiné věci, jež zase jsou použity k vytváření dalších věcí, je docela fascinující.</p>
</article>

<article class="content">
<h4 ><a id="2.5">Kompilátor Elmu</a></h4>

<p>Kompilátor Elmu je program, který transformuje kód, psaný v programovacím jazyku Elm na programovací jazyk JavaScript.</p>

<p><img src="images/elm-compiler.png" alt="" /></p>

<p>Všimněte si dvou JavaScriptových souborů v pravém dvorci nahoře. Obecně přijímá Elm v projektu víceré soubory <code class="highlighter-rouge">.elm</code> a kompiluje je do jediného souboru <code class="highlighter-rouge">.js</code>. Proč tedy můžeme mít více souborů <code class="highlighter-rouge">.js</code> ve finální sestavě? Kód pro naší aplikaci nemusí být stoprocentně psán v jazyce Elm. Tato vlastnost je užitečná při zavádění Elmu do existujícího projektu. Můžete si vybrat méně riskantní část aplikace a napsat ji v Elmu. Přičemž se s Elmem seznámíte a můžete se později rozhodnout, co uděláte se zbývající částí. Zda ji rovněž přepíšete do Elmu nebo ponecháte v původním (kompatibilním) jazyce.</p>

<p>Elm je navržen pro vytváření spolehlivých webových aplikací, které běží v prohlížeči, jež ovšem rozumí pouze JavaScriptu, do něhož musí být zdrojový kód v Elmu kompilován. Ovšem, pokud se někdy v budoucnosti přesune Web od JavaScriptu k <a href="http://webassembly.org/" target="_blank">něčemu jinému</a>, bude muset být Elm kompilován k tomuto "jinému".<br>
V současné době nemůžeme v Elmu vytvářet serverové aplikace. Možná, že to někdy bude možné; v tom případě bude muset být Elm kompilován do více cílových jazyků.</p>
</article>

<article class="content">
<h4 ><a id="2.6">Architektura Elmu</a></h4>

<p>Architektura Elmu je sada vzorů a jazykových vlastností pro správu toku dat v programu. Ve vysoce interaktivní aplikaci tečou data různými komponenty. Výsledná interakce mezi těmito komponentami může být docela složitá. Architektura Elmu tuto složitost redukuje použitím několika velice chytrých technik. V čem tyto techniky spočívají se podrobněji seznámíme v <a href="elm-architecture.html" target="_blank">kapitole 5</a>.</p>

<p>Přicházíte-li k Elmu z jiných jazyků, jako je JavaScript, Ruby nebo Python, všimnete si, že v Elmu neexistuje separátní framework pro vytváření aplikací. Je to proto, že Elm Architecture je součástí vlastního jazyka. Jakékoli další procedury (features), nepřítomné v jádru jazyka, mohou být přidány do vašeho repertoáru jednoduchou instalací paketu z rozsáhlé kolekce <a href="http://package.elm-lang.org/" target="_blank">paketů</a>, Elmem nabízených. Většina z těchto paketů je navržena spíše pro provádění specifického úkolu jako je např. výběr dat z HTTP serveru, než poskytování klenutého frameworku pro vytváření složitých aplikací. Z těchto důvodů je Elm nejenom alternativou k JavaScriptu ale také k frameworkům, jako je React nebo Angular.</p>
</article>

<article class="content">
<h4 ><a id="2.7">Runtime Elmu</a></h4>

<p>Elm runtime je systém, podporující provádění programů, psaných v programovacím jazyku Elm. Tento runtime je částí toho, co číní Elm tak mocným. Je to kód, který Elm realizuje "za scénou", takže můžeme psát programy, popisující to, čeho chceme dosáhnout bez starosti o to, jak jej Elm provede. Můžete to vidět v akci při pohledu na výstup příkazu, který jsme zadávali:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">elm-make HomePage.elm --output elm.js</code></pre></figure>

<p>Požádali jsme kompilátor Elmu aby kompiloval kód v našem souboru <code class="highlighter-rouge">HomePage.elm</code> do JavaScriptu (<code class="highlighter-rouge">elm.js</code>).</p>

<p class="info"><code class="highlighter-rouge">elm-make</code> 
je stavební nástroj, který za scénou používá kompilátor Elmu. Více o tomto nástroji později.</p>

<p>Nahlédnete-li do souboru <code class="highlighter-rouge">elm.js</code>, zjistíte, že obsahuje tisíce řádků JavaScriptového kódu. Ale moment - my jsme nenapsali tuny kódu v Elmu pro vytvoření naší jednoduché webové stránky. Bylo to sotva patnáct řádků. Co se tu děje?</p>

<p>Tady právě přichází ke slovu runtime Elmu. Soubor <code class="highlighter-rouge">elm.js</code> obsahuje nejen kód, který jsme napsali ale také celý runtime Elmu a všechny ostatní pakety, které jsme instalovali. Browser rozumí pouze JavaScriptu, takže do něj musí být transformován kód v Elmu, včetně kódu pro runtime samotný. Uživatelé naší aplikace ani nepoznají, že byl Elm použit k jejímu vytvoření.</p>

<p><img src="images/elm-dirty-secret.png" alt="" /></p>

<p class="info"> Abychom pochopili, jak vytvářet složité aplikace v Elmu, není vůbec zapotřebí, abychom se zabývali kódem uvnitř runtime Elmu. To je jeden z důvodů, proč je Elm takový snadný jazyk; jeho tvůrci vykonali mnoho těžké práce za nás. My pouze stavíme na všech těch udělátkách, které jsou pro nás v runtime napsány.</p>
</article>

<article class="content">
<h4 ><a id="2.8">Elm-make</a></h4>

<p><code class="highlighter-rouge">Elm-make</code> je nástroj pro tvorbu projektů. Tento "žentour" přijímá soubory <code class="highlighter-rouge">.elm</code> a kompiluje je do JavaScriptu nebo HTML. Při kompilaci do HTML vloží <code class="highlighter-rouge">elm-make</code> celý JavaScriptový kód (jenž jsme viděli v souboru <code class="highlighter-rouge">elm.js</code>) mezi tagy <code class="highlighter-rouge">&lt;script&gt;</code>. Je to nejlepší způsob, jak udržet JavaScriptový kód v odděleném souboru, vzhledem ke snadnosti testování,organizaci kódu a opětovného použití. Doporučuji tedy kompilovat kód Elmu do JavaScriptového souboru (<code class="highlighter-rouge">index.html</code>).</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">elm-make HomePage.elm --output elm.js

OR

elm-make HomePage.elm --output elm.html</code></pre></figure>

<p>Implicitně tiskne <code class="highlighter-rouge">elm-make</code> pouze chyby, nikoliv varování. Chcete-li vidět také varování, spusťte jej s návěstím <code class="highlighter-rouge">--warn</code>, jako je toto:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">elm-make HomePage.elm --output elm.js --warn

<span class="o">==========================</span> WARNINGS <span class="o">=============================</span>

--------------- missing <span class="nb">type </span>annotation ------------ HomePage.elm

Top-level value <span class="sb">`</span>main<span class="sb">`</span> does not have a <span class="nb">type </span>annotation.

17| main <span class="o">=</span>
    ^^^^
I inferred the <span class="nb">type </span>annotation so you can copy it into your code:

main : Html a</code></pre></figure>

<p>Pokud varovnou zprávu nevidíte, smažte adresář <code class="highlighter-rouge">build-artifacts</code>, umístěný v adresáři <code class="highlighter-rouge">beginning-elm/elm-stuff</code> a spusťte příkaz znovu.</p>

<dl>
  <dt>Warning</dt>
  <dd>Varovná zpráva indikuje, že v našem programu může být něco nesprávného. Protože varování nezabrání úspěšné kompilaci programu, nejsme nuceni na varovné zprávy reagovat. Je ale dobrou praxí, tyto idicie osvětlit, jakmile se objeví. Pokud tak nečiníme, je velká pravděpodobnost, že dříve nebo později narazíme na vážnější problém.</dd>
  <dt>Error</dt>
  <dd>Chybová zpráva indikuje, že v našem programu určitě je něco závadného. Tyto chyby musíme napravit ještě před kompilací.</dd>
</dl>
</article>

<article class="content">
<h4 ><a id="2.9">Elm package</a></h4>

<p>I když Platforma Elm obsahuje všechny nezbytné nástroje pro práci s Elmem, neobsahuje všechny pakety, dostupné v <a href="http://package.elm-lang.org/" target="_blank">katalogu</a> Elmu. Tu a tam se může stát, že si potřebujeme nějaký další paket stáhnout a instalovat.</p>

<h4>Instalace paketu</h4>

<p>Aplikace <code class="highlighter-rouge">elm-package</code> je nástroj pro publikování a stahování paketů z  <a href="http://package.elm-lang.org/" target="_blank">online katalogu</a>. Když jsme v předchozím výkladu při vytváření jednoduché domovské stránky, zadali příkaz <code class="highlighter-rouge">elm-make</code>, "usoudilo" zázemí Elmu automaticky, že potřebujeme paket <a href="http://package.elm-lang.org/packages/elm-lang/html/latest/" target="_blank"><code class="highlighter-rouge">elm-lang/html</code></a>, načež tedy tento paket instalovalo. Tentokrát si stáhneme a instalujeme paket sami. Později v naši knize budeme chtít zadat HTTP požadavek na server ohledně získání nějakých dat. K tomu budeme potřebovat paket <a href="http://package.elm-lang.org/packages/elm-lang/http/latest" target="_blank"><code class="highlighter-rouge">elm-lang/http</code></a>. Instalujme tento paket nyní pro získání představy, jak takový <code class="highlighter-rouge">elm-package</code> pracuje. Spusťte v terminálu z adresáře <code class="highlighter-rouge">beginning-elm</code> následující příkaz.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">elm-package install elm-lang/http</code></pre></figure>

<p>Před stažením tohoto paketu nás <code class="highlighter-rouge">elm-package</code> zdvořile požádá o svolení k přidání tohoto paketu jako dependenci k paketu <code class="highlighter-rouge">elm-package.json</code>.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">To install elm-lang/http I would like to add the following
dependency to elm-package.json:

    <span class="s2">"elm-lang/http"</span>: <span class="s2">"1.0.0 &lt;= v &lt; 2.0.0"</span>

May I add that to elm-package.json <span class="k">for </span>you? <span class="o">[</span>Y/n] y</code></pre></figure>

<p>Potvrďte "y" a stiskněnte Enter. <code class="highlighter-rouge">Elm-package</code> vás požádá o potrvzení svého plánu instalace. Opět potvrďte "y" a stiskněte Enter.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">Some new packages are needed. Here is the upgrade plan.

  Install:
    elm-lang/http 1.0.0

Do you approve of this plan? <span class="o">[</span>Y/n] y
Starting downloads...

  ● elm-lang/http 1.0.0

Packages configured successfully!</code></pre></figure>

<p>Po úspěšné instalaci je paket vložen do adresáře <code class="highlighter-rouge">beginning-elm/elm-stuff/packages</code>.</p>

<p><img src="/images/elm-intro/elm-http-inside-elm-stuff.png" alt="" /></p>

<p>Všimněte si, že všechny pakety, které jsme dosud instalovali, byly vloženy do adresáře <code class="highlighter-rouge">elm-lang</code>. Je to proto, že všechny tyto pakety jsou publikovány organizací <a href="https://github.com/elm-lang" target="_blank"><code class="highlighter-rouge">elm-lang</code></a>, která spravuje Elm. Všechny názvy paketů jsou uvedeny uživatelským jménem osoby či organizace, která paket publikuje. Pro každé uživatelské jméno vytvoří Elm samostatný adresář.</p>

<p>Až budete instalovat více paketů, všimnete si, že některé z oficiální paketů jsou uvedeny uživatelským jménem <code class="highlighter-rouge">evancz</code> místo <code class="highlighter-rouge">elm-lang</code>, například <a href="http://package.elm-lang.org/packages/evancz/url-parser/latest" target="_blank"><code class="highlighter-rouge">evancz/url-parser</code></a>. Toto uživatelské jméno patří Evanu Czaplickému, tvůrci Elmu. Evan má tendenci používat toto označení u paketů, které se snaží ještě vylepšit, předtím než je zařadí pod hlavičku oficiální organizace <code class="highlighter-rouge">elm-lang</code>.</p>

<p>Existuje celá pletora dalších programátorů a organizací, které publikují výtečné pakety. Na příklad paket <a href="http://package.elm-lang.org/packages/NoRedInk/elm-decode-pipeline/latest" target="_blank"><code class="highlighter-rouge">NoRedInk/elm-decode-pipeline</code></a> je publikován společností <a href="https://github.com/NoRedInk" target="_blank">NoRedInk</a>, která věnuje mnoho času a zdrojů pro rozvoj Elmího ekosystému.</p>

<h4>Co je to vlastně paket?</h4>

<p>Používám označení <em>paket</em> (package) v celé této kapitole, aniž jsem jej formálně uvedl. Paket v Elmu je kolekce modulů. Modul je kolekce funkcí a jiných hodnot (s nimiž se seznámíme v příští kapitole). Pro tuto chvíli považujme funkce za nejmenší utility, které můžeme v Elmu napsat. Některé z těchto utilit lze použít v různých kontextech. Opakovaně použitelné utility, které provádějí podobné úlohy lze soustředit do jednoho modulu. Moduly, řešící podobné problémy lze soustředit do jednoho paketu. Tyto pakety můžete sdílet s jinými programátory publikováním v online katalogu.</p>

<p><img src="images/package-module-relationship.png" alt="" /></p>

<p>Paket nemusí obsahovat více modulů. Například, paket <a href="http://package.elm-lang.org/packages/evancz/url-parser/latest" target="_blank"><code class="highlighter-rouge">evancz/url-parser</code></a> má pouze jeden modul, zvaný <code class="highlighter-rouge">UrlParser</code>. Účelem paketu <code class="highlighter-rouge">elm-package</code> je práce s pakety. Vložení modulu do paketu usnadňuje jeho sdílení s ostatními prostřednictvím katalogu paketů.</p>
</article>

<article class="content">
<h4 ><a id="2.10">Elm-reactor</a></h4>

<p>Když jsme tvořili jednoduchou webovou stránku v Elmu, vytvořili jsme nejprve soubor s extenzí <code class="highlighter-rouge">.elm</code>, do něhož jsme vložili náš kód. Potom jsme jej kompilovali na JavaScript použitím aplikace <code class="highlighter-rouge">elm-make</code>. Potom jsme uvedli soubor (<code class="highlighter-rouge">elm.js</code>) v souboru <code class="highlighter-rouge">index.html</code> pro načtení naší Elmové aplikace v prohlížeči. To bylo mnoho kroků jenom proto abychom viděli výsledek našeho Elmího kódu. Elm poskytuje interaktivní vývojářský nástroj zvaný <code class="highlighter-rouge">elm-reactor</code>, jenž nám umožní vidět výsledek našeho kódu ihned. Přejděte v terminálu do adresáře <code class="highlighter-rouge">beginning-elm</code> a spusťte tento příkaz: <code class="highlighter-rouge">elm-reactor</code>.Měli byste vidět něco jako toto:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">elm-reactor

elm-reactor 0.18.0
Listening on http://localhost:8000</code></pre></figure>

<p><code class="highlighter-rouge">Elm-reactor</code> vytvořil vývojářský server na portu <code class="highlighter-rouge">8000</code>.</p>

<p class="info">Máte-li na tomto portu spuštěný jiný server, musíte jej zavřít příkazem <code class="highlighter-rouge">Ctrl + c</code> z terminálu. Jinak nebude <code class="highlighter-rouge">elm-reactor</code> schopen spustit lokální  vývojářský server Elmu</p>

<p>Navštívíte-li v prohlížeči <a href="http://localhost:8000/" target="_blank"><code class="highlighter-rouge">http://localhost:8000/</code></a>, uvidíte obsah našeho kořenového adresáře projektu <code class="highlighter-rouge">beginning-elm</code>. Uvidíte také seznam paketů, na nichž náš projekt závisí a metadata projektu obsažená v souboru <code class="highlighter-rouge">elm-package.json</code>.</p>

<p><img src="images/elm-reactor.png" alt="" /></p>

<p>Sekce <em>Package Information</em> ukazuje nějaký generický text. Změňme jej na popis účelu naší aplikace. Změňme hodnotu klíče <code class="highlighter-rouge">summary</code> v souboru <code class="highlighter-rouge">elm-package.json</code> jak zobrazeno níže:</p>

<figure class="highlight"><pre><code class="language-code" data-lang="code">{
    "version": "1.0.0",
    "summary": "A sample app for learning web application development with Elm.",
    .
    .    
}</code></pre></figure>

<p>Obnovíte-li (refresh) stránku na <a href="http://localhost:8000/" target="_blank"><code class="highlighter-rouge">http://localhost:8000/</code></a> měl byste vidět nový popis pod názvem  <em>Package Information</em>. Je-li popis delší než 80 znaků, informace o paketu se nezobrazí.</p>

<p>Následně klikněte na odkaz <code class="highlighter-rouge">HomePage.elm</code> v sekci <em>File Navigation</em>. Měl byste vidět něco jako toto:</p>

<p><img src="images/homepage-no-style.png" alt="" /></p>

<p><code class="highlighter-rouge">Elm-reactor</code> kompiluje kód v souboru <code class="highlighter-rouge">HomePage.elm</code> a zobrazí jej v prohlížeci. Bohužel ne tak pěkně, jako naše originální domovská stránka:</p>

<p><img src="images/homepage-in-html.png" alt="" /></p>

<p>V současnosti nepodporuje <code class="highlighter-rouge">elm-reactor</code> načítání externích CSS frameworků, jako je Bootstrap. Má také další omezení. Například postrádá živé znovunačtení - techniku, která automaticky znovunačte stránku při změně výchozího kódu. To vyžaduje, abychom "osvěžovali" stránku ručně pokaždé, když změníme kód, chceme-li vidět výsledek. Kvůli těmto omezením nemusí <code class="highlighter-rouge">elm-reactor</code> poskytovat nejlepší vývojářské pohodlí, zejména při tvorbě složitých aplikací, které vyžadují robustní sestavné (build) procesy. Naštěstí existuje více sestavných nástrojů, které jsou mnohem účinnější než <code class="highlighter-rouge">elm-reactor</code>. Jedním takovým nástrojem je <a href="https://webpack.github.io/" target="_blank">Webpack</a>. Diskuse o těchto nástrojích je mimo rámec těchto textů. Vzhledem k řečenému je <code class="highlighter-rouge">elm-reactor</code> pořád výtečný pro prototypování jednoduchých aplikací a my jej budeme při výkladu používat.</p>
</article>


<article class="content">
<h4 ><a id="2.11">Elm-repl</a></h4>

<p><code class="highlighter-rouge">Elm-repl</code> je nástroj, který nám umožňuje experimentovat s Elmem. Budeme jej rozsáhle používat v další kapitole při seznamování se syntaxí a sémantikou programovacího jazyka Elm. REPL je zkratka sousloví  <strong>R</strong>ead <strong>E</strong>val <strong>P</strong>rint <strong>L</strong>oop. Vpodstatě čeká na nějaký náš zápis, který vyhodnotí, vytiskne výsledek a vrátí se k čekání na další kód. Tento cyklus se opakuje donekonečna, dokud toto prostředí neopustíme zadáním <code class="highlighter-rouge">Ctrl + d</code> nebo příkazem <code class="highlighter-rouge">:exit</code>.</p>

<p>Stejně jako <code class="highlighter-rouge">elm-reactor</code>dovoluje nám <code class="highlighter-rouge">elm-repl</code> zápsat kód Elmu a okamžitě vidět výsledek bez nutnosti ruční kompilace. Rozdíl mezi <code class="highlighter-rouge">elm-reactor</code> a <code class="highlighter-rouge">elm-repl</code> je ten, že ten první přijímá zdrojový soubor v Elm, kompiluje jej do JavaScriptu a zobrazí jej v prohlížeči, zatímco ten druhý přijímá výrazy Elmu, vyhodnotí je za pochodu a výsledek zobrazí přímo v terminálu. <code class="highlighter-rouge">Elm-repl</code> je vhodný pro zkoušení krátkých výrazů při zkoumání jazyka, zatímco <code class="highlighter-rouge">elm-reactor</code> je lepší pro zkoušení větších úseků kódu, jež je v repl nepohodlné.</p>

<p>Byť <code class="highlighter-rouge">elm-repl</code> pracuje tak, že kompiluje kód Elmu do JavaScriptu, nezobrazuje kompilovaný kód v prohlížeči. Proto pro realizaci tohoto kódu potřebuje alternativní prostředí. Jak bylo vysvětleno v sekci <a href="installation.html#installing-nodejs" target="_blank">Instalace</a>, toto prostředí poskytuje Node.js.</p>

<h4>Používání elm-repl</h4>

<p>Přejděte v terminálu do adresáře <code class="highlighter-rouge">beginning-elm</code> a zadejte tento příkaz: <code class="highlighter-rouge">elm-repl</code>. Měli byste vidět něco jako toto:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">elm-repl

---- elm-repl 0.18.0 -----------------------------------------------------------
 :help <span class="k">for </span><span class="nb">help</span>, :exit to <span class="nb">exit</span>, more at &lt;https://github.com/elm-lang/elm-repl&gt;
--------------------------------------------------------------------------------
&gt;</code></pre></figure>

<p>Zde nyní můžeme zapisovat všechny druhy výrazů a zjišťovat, v co se vyhodnotí. Zde je několik příkladů:</p>

<figure class="highlight"><pre><code class="language-haskell" data-lang="haskell"><span class="o">&gt;</span> <span class="mi">42</span> <span class="o">/</span> <span class="mf">7.5</span>
<span class="mf">5.6</span> <span class="o">:</span> <span class="kt">Float</span>

<span class="o">&gt;</span> <span class="n">pi</span>
<span class="mf">3.141592653589793</span> <span class="o">:</span> <span class="kt">Float</span>

<span class="o">&gt;</span> <span class="kt">List</span><span class="o">.</span><span class="n">reverse</span> <span class="p">[</span><span class="s">"Next"</span><span class="p">,</span> <span class="s">"Stop"</span><span class="p">,</span> <span class="s">"Pottersville"</span><span class="p">]</span>
<span class="p">[</span><span class="s">"Pottersville"</span><span class="p">,</span><span class="s">"Stop"</span><span class="p">,</span><span class="s">"Next"</span><span class="p">]</span> <span class="o">:</span> <span class="kt">List</span> <span class="kt">String</span></code></pre></figure>

<p class="info">Všechny příklady v této knize jsou důkladně testovány v Elm 0.18. Pokud se vám stane, že se výstup liší od zobrazení v knize, zkuste repl restartovat. Někdy to pomůže. Pokud ne, zkuste kontaktovat autora překladu nebo autora textu viz <a href="http://elmprogramming.com/feedback.html">email</a>
.</p>
</article>

<article class="content">
<h4 ><a id="2.12">Sajt Try Elm</a></h4>

<p>Někdy se stane, že chcem napsat nějaký kód v Elm a vidět co se stane a to bez instalace Elm Platformy a dalších požadovaných nástrojů. Pro ten účel je vynikající sajt <a href="http://elm-lang.org/try" target="_blank">Try Elm</a>. Vyzkoušejme na tomto sajtu náš kód pro domovskou stránku. Zkopírujte vše ze souboru <code class="highlighter-rouge">HomePage.elm</code> kromě prvního řádku: <code class="highlighter-rouge">module BeginningElm exposing (..)</code> a vlepte to do levé poloviny stránky. Poté stiskněte tlačítko <em>Compile</em>. Na pravé polovině bychom opět měli vidět naši domovskou stránku.</p>

<p><img src="images/try-elm.png" alt="" /></p>

<p>Důvod, proč nemůžeme připojit řádek definující <code class="highlighter-rouge">module</code> je ten, že si Try Elm vytváří za scénou vlastní modul. Elm nám nedovolí mít dvě definice <code class="highlighter-rouge">modulu</code> v jednom souboru. Moduly se budeme podrobně zabývat v  <a href="easier-code-organization.html" target="_blank">kapitole 4</a>.</p>

<p>Sajt Try Elm je dobrý pro zkoušení jednorázového experimentálního kódu. V současné době neposkytuje robustní prostředí, požadované pro vývoj profesionálních webových aplikací. Doufejme, že jednou bude. Jednou z nejtíživějších věcí pro programátora je nutnost instalovat mraky nástrojů, které jsou neustále ve vzájemném konfliktu, vytvářeje tak pekelné prostředí, s nímž se naše jemná duše nedokáže vypořádat. Pokud bychom mohli stavět pěkné Elmové aplikace přímo v prohlížeči, byli bychom mnohem šťastnější. Doufejme, že takový den jednou přijde.</p>
</article>


<nav class="pagination">
<a class="pagination-next" href="introduction.html">
<em>&larr; Previous</em>
<strong>Úvodní kapitola</strong>
</a>
<a class="pagination-next" href="elm-basics-intro.html">
<em>Next &rarr;</em><strong>Základy jazyka</strong>
</a>
<a class="elevator" href="aa-index.html"><i class="fa fa-angle-up"></i>
<span>Back to top</span>
</a>
</nav>

</div>
</div>



<footer id="footer" class="page-footer">
<footer class="container">
 <p>Copyright © 2016 Pawan Poudel. All Rights Reserved.</p>
</footer>
</footer>

  </body>
</html>
