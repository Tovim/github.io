<!DOCTYPE html>

<html lang="cs">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<title> - Beginning Elm</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0"> 
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="css/main.css">
<!--<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">    deformuje zobrazení font awsome -->
</head>

<body>

<section class="heading">
<h1> 3.11 </h1>
<h2>Výraz LET</h2>
</section>

<div class="page-content">
<div class="container">

<div class="breadcrumb-holder">
<header id="breadcrumb" class="breadcrumb">
<a href="aa-index.html" class="breadcrumb-toggle">
  <span></span>
  <span></span>
  <span></span>
</a>

<span class="breadcrumb-section">syntaxe</span>

<a class="breadcrumb-next" href="case-expression.html">
<i class="fa fa-angle-right"></i><span>Next article</span>
</a>
<a class="breadcrumb-previous" href="function.html">
<i class="fa fa-angle-left"></i><span>Previous article</span>
</a>
          
</header>
</div>

<article class="content">
<p>Nezasvěcený čtenář definice naší funkce <code class="highlighter-rouge">escapeEarth</code> se může divit, co čísla <code class="highlighter-rouge">11.186</code> a <code class="highlighter-rouge">7.67</code> skutečné znamenají.</p>

<figure class="highlight"><pre><code class="language-haskell" data-lang="haskell"><span class="n">escapeEarth</span> <span class="n">velocity</span> <span class="n">speed</span> <span class="o">=</span>
    <span class="kr">if</span> <span class="n">velocity</span> <span class="o">&gt;</span> <span class="mf">11.186</span> <span class="kr">then</span>
        <span class="s">"Godspeed"</span>
    <span class="kr">else</span> <span class="kr">if</span> <span class="n">speed</span> <span class="o">==</span> <span class="mf">7.67</span> <span class="kr">then</span>
        <span class="s">"Stay in orbit"</span>
    <span class="kr">else</span>
        <span class="s">"Come back"</span></code></pre></figure>

<p>Bylo by pěkné, kdybychom jim mohli dát jména. Můžeme tak učinit použitím výrazu <code class="highlighter-rouge">let</code>. V souboru <code class="highlighter-rouge">Playground.elm</code> změňte funkci <code class="highlighter-rouge">escapeEarth</code> tak, že vypadá takto:</p>

<figure class="highlight"><pre><code class="language-haskell" data-lang="haskell"><span class="n">escapeEarth</span> <span class="n">velocity</span> <span class="n">speed</span> <span class="o">=</span>
    <span class="kr">let</span>
        <span class="n">escapeVelocityInKmPerSec</span> <span class="o">=</span>
            <span class="mf">11.186</span>

        <span class="n">orbitalSpeedInKmPerSec</span> <span class="o">=</span>
            <span class="mf">7.67</span>
    <span class="kr">in</span>
        <span class="kr">if</span> <span class="n">velocity</span> <span class="o">&gt;</span> <span class="n">escapeVelocityInKmPerSec</span> <span class="kr">then</span>
            <span class="s">"Godspeed"</span>
        <span class="kr">else</span> <span class="kr">if</span> <span class="n">speed</span> <span class="o">==</span> <span class="n">orbitalSpeedInKmPerSec</span> <span class="kr">then</span>
            <span class="s">"Stay in orbit"</span>
        <span class="kr">else</span>
            <span class="s">"Come back"</span></code></pre></figure>

<p>Výraz <code class="highlighter-rouge">let</code> vytváří lokální prostor (scope). Často se stává, že potřebujeme definovat lokální konstanty a funkce, které nejsou přístupné mimo vymezený prostor skriptu. Můžeme je definovat uvnitř výrazu <code class="highlighter-rouge">let</code>, jímž je lokální prostor vymezen - v našem případě se shoduje s prostorem funkce. Žádné volání mimo funkci <code class="highlighter-rouge">escapeEarth</code> nemá přístup ke konstantám: <code class="highlighter-rouge">escapeVelocityInKmPerSec</code> a <code class="highlighter-rouge">orbitalSpeedInKmPerSec</code>.</p>

<p><img src="/images/elm-intro/let-expression-syntax.png" alt="" /></p>

<p>Pokud rychlost naší kosmické lodi není dost velká na to aby opustila zemi nebo zůstala na oběžné dráze, prostě ji přikážeme aby se vrátila na Zem. Bylo by také vhodné, kdybychom mohli kosmické lodi říci, kde má přistát. Vytvořme pro to funkci uvnitř výrazu <code class="highlighter-rouge">let</code>.</p>

<figure class="highlight"><pre><code class="language-haskell" data-lang="haskell"><span class="n">escapeEarth</span> <span class="n">velocity</span> <span class="n">speed</span> <span class="n">fuelStatus</span> <span class="o">=</span>
    <span class="kr">let</span>
        <span class="n">escapeVelocityInKmPerSec</span> <span class="o">=</span>
            <span class="mf">11.186</span>

        <span class="n">orbitalSpeedInKmPerSec</span> <span class="o">=</span>
            <span class="mf">7.67</span>

        <span class="n">whereToLand</span> <span class="n">fuelStatus</span> <span class="o">=</span>
            <span class="kr">if</span> <span class="n">fuelStatus</span> <span class="o">==</span> <span class="s">"low"</span> <span class="kr">then</span>
                <span class="s">"Land on droneship"</span>
            <span class="kr">else</span>
                <span class="s">"Land on launchpad"</span>
    <span class="kr">in</span>
        <span class="kr">if</span> <span class="n">velocity</span> <span class="o">&gt;</span> <span class="n">escapeVelocityInKmPerSec</span> <span class="kr">then</span>
            <span class="s">"Godspeed"</span>
        <span class="kr">else</span> <span class="kr">if</span> <span class="n">speed</span> <span class="o">==</span> <span class="n">orbitalSpeedInKmPerSec</span> <span class="kr">then</span>
            <span class="s">"Stay in orbit"</span>
        <span class="kr">else</span>
            <span class="n">whereToLand</span> <span class="n">fuelStatus</span></code></pre></figure>

<p>Funkce <code class="highlighter-rouge">escapeEarth</code> nyní přijímá další parametr, zvaný <code class="highlighter-rouge">fuelStatus</code>. Nově definovaná privátní funkce <code class="highlighter-rouge">whereToLand</code> kontroluje stav paliva (fuel status) a říká kde přistát (where to land). Tato funkce není "viditelná" mimo výraz  <code class="highlighter-rouge">let</code>. Upravte funkci <code class="highlighter-rouge">main</code> aby volala <code class="highlighter-rouge">escapeEarth</code> takto:</p>

<figure class="highlight"><pre><code class="language-haskell" data-lang="haskell"><span class="n">main</span> <span class="o">=</span>
    <span class="n">escapeEarth</span> <span class="mi">10</span> <span class="mf">6.7</span> <span class="s">"low"</span>
        <span class="o">|&gt;</span> <span class="kt">Html</span><span class="o">.</span><span class="n">text</span></code></pre></figure>

<p>Obnovíte-li stránku na <a href="http://localhost:8000/elm-examples/Playground.elm" target="_blank"><code class="highlighter-rouge">http://localhost:8000/elm-examples/Playground.elm</code></a>, měli bychom vidět "Land on droneship".</p>
</article>

<nav class="pagination">
<a class="pagination-next" href="function.html">
<em>&larr; Previous</em>
<strong>Funkce</strong>
</a>
<a class="pagination-next" href="case-expression.html">
<em>Next &rarr;</em><strong>Výraz CASE</strong>
</a>
<a class="elevator" href="aa-index.html"><i class="fa fa-angle-up"></i>
<span>Back to top</span>
</a>
</nav>

</div>
</div>



<footer id="footer" class="page-footer">
<footer class="container">
 <p>Copyright © 2016 Pawan Poudel. All Rights Reserved.</p>
</footer>
</footer>

  </body>
</html>
